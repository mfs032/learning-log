# bash内置参数拓展

## 字符换拼接

```bash
name="Alice"
age="15"

#方式1：变量与字符串直接拼接
result1="My name si ${name},i am ${age} years old"

#方式2：变量与变量拼接
result2=${name}"_age_"${age}
```



## 计算字符串长度

通过 `${#变量名}` 语法获取字符串的字符个数（空格、符号均算 1 个字符）。

```bash
str="Hello World"
len=${#str}
echo "字符串长度：${str}"
```



## 字符串截取

\语法：`${变量名:起始位置:截取长度}`（**起始位置从 0 开始**，长度可选，不写则截取到末尾）

```bash
str="I love Bash scripting"

1.从0开始，截取5个字符
sub1=${str:0:5}
echo sub1

2.从7开始，截取到末尾
sub2=${str:7}
echo $sub2

3.从倒数第9位开始，截取5个，注意-9前必须加空格
sub3=${str: -9:5}
echo $sub3
```



## 字符串替换

1.替换第一个匹配项

${变量名/旧值/新值}，替换字符串中首次出现的旧值

```bash
str="cat dog cat fish"

#i换第一个cat为bird
new_str=${str/cat/bird}
echo $new_str	#输出bird dog cat fish
```

2.全局替换

${变量名//旧值/新值}，替换字符串中所有匹配的旧值

```bash
str="cat dog cat fish"
#将所有cat替换为bird
new_str=${str//cat/bird}
echo $new_str #输出bird dog bird fish
```

3.匹配开头并替换

${变量名/#旧值/新值}，这个旧值必须在字符串第一个

```bash
str="hello hello world"
#只替换开头的hello为hi
new_str=${str/#hello/hi}
echo $new_str #输出hi hello world
```

4.匹配结尾并替换

${变量名/%旧值/新值}，这个旧值必须在字符串最后一个

```bash
str="hello world world"
#只替换结尾的world
new_str=${str/%world/li}
echo $new_str #输出hello world li
```



## 删除前缀和后缀

### 通配符(Wildcard Characters)

通配符不是正则表达式,用于匹配文件或字符串模式的特殊字符。

1.星号`*`

```bash
#匹配任意数量的的任意字符
*.txt：匹配所有以.txt结尾的字符串或者文件
data*：匹配所有以data开头的字符串或者文件
*：单独使用，会匹配所有文件，处理以.开头的隐藏文件
```

2.问好`?`

```bash
#匹配一个任意字符
report?.txt：匹配report1.txt、reportx.txt等
img-??.png：匹配文件中倒数第二第三任意字符的.png文件。?必须要匹配到一个字符
```

3.方括号[...]

```bash
#方括号会匹配[]内出现的任意一个字符
[abc].txt：会匹配a.txt、b.txt、c.txt
[0-9].txt：匹配0.txt、1.txt、2.txt等
[a-zA-Z].txt：匹配a.txt等
[a,b,c]：和[abc]效果相同
```

4.感叹号[!...]

```bash
#匹配方括号内字符以外的其它字符
[!0-9].txt：匹配所有不以数字开头的.txt文件
[^0-9].txt：用法和[!0-9].txt一样
```

5.转义字符\

```bash
#当要匹配通配符中自带含义的字符时,例如*?[]需要通过\进行转义
```

前缀删除和后缀删除

${str#pattern}：从开头删除到第一个匹配到的字符(包括字符)

${str##pattern}：从开头删除到匹配到的最后一个字符

${str%pattern}：从结尾删除到第一个匹配的字符

${str%%pattern}：从结尾删除到最后一个匹配的字符

```bash
filePath="/home/lijunhua/document/file.txt"

#从开头删除到第一个匹配的/，删除最短前缀
firstFilePath=${filePath#*/}
echo $firstFilePath #输出home/lijunhua/document/file.txt

#从开头删除到最后一个匹配的/，删除最长前缀
secondFilePath=${filePath##*/}
echo $secondFilePath #输出file.txt

fileName=archive.tar.gz.2025-06-18
#从结尾删除到第一个匹配的.删除最短后缀
firstFileName=${fileName%.*}
echo $firstFileName #archive.tar.gz

#从结尾删除到最后一个匹配的.删除最长后缀
secondFileName=${fileName%%.*}
echo $secondFileName #archive
```



# sed(stream editor)流编辑器

## sed基本语法

```bash
sed 'script' filename

script：包含一个或多个要执行的sed的命令的字符串
filname:要处理的文件
如果没有指定文件，sed会从标准输入(例如|)读取数据
```

## 常用的sed命令

### 替换`s`

```bash
script：
s/pattern/replacement/flags
s:表示替换命令
patten：要查找和匹配的模式。可以时普通字符串，可以是正则表达式
replacement：用来替换pattern匹配到的字符串
flags：可选的，修饰符，用来控制替换的行为
```







